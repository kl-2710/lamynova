{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lamynova - Đặt lại mật khẩu</title>
    <meta name="description" content="AIMass Tailwind based SASS Template" />

    <!-- Favicon  -->
    <link rel="icon" href={% static 'main/assets/img/favicon.png' %} />

    <!-- Site font -->
    <link href={% static 'main/assets/fonts/fonts.css' %} rel="stylesheet" />

    <!-- Vendor CSS -->
    <link rel="stylesheet" href={% static 'main/assets/css/vendors/swiper-bundle.min.css' %} />
    <link rel="stylesheet" href={% static 'main/assets/css/vendors/jos.css' %} />
    <link rel="stylesheet" href={% static 'main/assets/css/vendors/menu.css' %} />

    <!-- Custom CSS -->
    <link rel="stylesheet" href={% static 'main/assets/css/custom.css' %} />

    <!-- Development css -->
    <link href={% static 'main/assets/css/style.css' %} rel="stylesheet" />

    <!-- Production css -->
    <!-- <link rel="stylesheet" href={% static 'main/assets/css/style.min.css' %}> -->
</head>

<body>
    <div class="page-wrapper relative z-[1] bg-white">
        <main class="main-wrapper relative overflow-hidden">
            <!--...::: Login Section Start :::... -->
            <section class="min-h-screen flex items-center justify-center relative z-1 overflow-hidden py-20 lg:py-0">
                <!-- Section Spacer -->
                <div class="container">
                    <!-- Section Container -->
                    <div cclass="row justify-center">
                        <div class="xl:col-7 lg:col-8 md:col-10">
                            <div class="py-[60px] px-8 sm:px-[60px] bg-white dark:bg-dark-2 rounded-[10px] shadow-lg text-center">
                                {% if validlink %}
                                    <h1 class="text-3xl sm:text-4xl xl:text-5xl font-bold leading-none -tracking-[1px] mb-3 text-black dark:text-white">Đặt lại mật khẩu của bạn</h1>
                                    <p class="text-base text-gray-700 dark:text-gray-300 mb-8">
                                        Vui lòng nhập mật khẩu mới của bạn bên dưới.
                                    </p>
                                    <div class="mt-8">
                                        <form method="post" class="flex flex-col gap-y-6">
                                            {% csrf_token %}
                                            {% if form.non_field_errors %}
                                                <div class="text-red-600 text-sm text-center mb-4">
                                                    {% for error in form.non_field_errors %}
                                                        <p>{{ error }}</p>
                                                    {% endfor %}
                                                </div>
                                            {% endif %}

                                            {# Trường New Password 1 #}
                                            <div class="flex flex-col text-left">
                                                <label for="{{ form.new_password1.id_for_label }}" class="text-base text-black dark:text-white mb-2">
                                                    {{ form.new_password1.label }} * 
                                                </label>
                                                {{ form.new_password1 }}
                                                
                                                {% if form.new_password1.errors %}
                                                    <p class="text-red-600 text-sm mt-1">
                                                        {% for error in form.new_password1.errors %}
                                                            {{ error }}
                                                        {% endfor %}
                                                    </p>
                                                {% endif %}
                                            </div>

                                            {# Trường New Password 2 (xác nhận) #}
                                            <div class="flex flex-col text-left">
                                                <label for="{{ form.new_password2.id_for_label }}" class="text-base text-black dark:text-white mb-2">
                                                    {{ form.new_password2.label }} * 
                                                </label>
                                                {{ form.new_password2 }} 
                                                {% if form.new_password2.errors %}
                                                    <p class="text-red-600 text-sm mt-1">
                                                        {% for error in form.new_password2.errors %}
                                                            {{ error }}
                                                        {% endfor %}
                                                    </p>
                                                {% endif %}
                                            </div>

                                            <button type="submit" class="button-box-shadow button-lg button-dark mt-5 mx-auto w-full sm:w-auto px-8 py-3 text-lg font-semibold rounded-md transition duration-300 ease-in-out hover:text-colorOrangyRed">Đặt lại mật khẩu</button>
                                        </form>
                                    </div>
                                {% else %}
                                    {# Thông báo lỗi khi liên kết không hợp lệ #}
                                    <h1 class="text-3xl sm:text-4xl xl:text-5xl font-bold leading-none -tracking-[1px] mb-3 text-black dark:text-white">Liên kết đặt lại mật khẩu không hợp lệ</h1>
                                    <p class="text-base text-gray-700 dark:text-gray-300 mb-8">
                                        Liên kết đặt lại mật khẩu đã lỗi thời hoặc không hợp lệ. Vui lòng yêu cầu đặt lại mật khẩu mới.
                                    </p>
                                    <a href="{% url 'password_reset' %}" class="button-box-shadow button-lg button-dark mx-auto px-8 py-3 text-lg font-semibold rounded-md transition duration-300 ease-in-out hover:opacity-90">
                                        Yêu cầu đặt lại mật khẩu mới
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <!-- Section Container -->
                </div>
                <!-- Section Spacer -->
            </section>
            <!--...::: Login Section End :::... -->
        </main>
    </div>

    <!--Vendor js-->
    <script src={% static 'main/assets/js/vendors/counterup.js' %} type="module"></script>
    <script src={% static 'main/assets/js/vendors/swiper-bundle.min.js' %}></script>
    <script src={% static 'main/assets/js/vendors/fslightbox.js' %}></script>
    <script src={% static 'main/assets/js/vendors/jos.min.js' %}></script>
    <script src={% static 'main/assets/js/vendors/menu.js' %}></script>

    <!-- Main js -->
    <script src={% static 'main/assets/js/main.js' %}></script>
</body>

</html>